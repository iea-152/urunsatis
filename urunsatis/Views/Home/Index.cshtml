@model List<urunsatis.Models.Product>

@{
    ViewData["Title"] = "Ana Sayfa";
}

<div class="container mt-4">

    <div class="row">
        <div class="col-12">

            <div id="yukleniyor" class="text-center py-5" style="display:none;">
                <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                    <span class="sr-only">Yükleniyor...</span>
                </div>
            </div>

            <div id="urunKutusu">
                <partial name="_UrunListesi" model="Model" />
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {

            // --- KATEGORİ (NAVBAR) TIKLAMA OLAYI ---
            $(document).on("click", ".kategori-link", function (e) {
                e.preventDefault();
                var url = $(this).attr("href");

                // AJAX URL'sini hazırla (Search parametresi silindi)
                var ajaxUrl = url.replace("/Home/Index", "/Home/UrunleriGetir");

                UrunleriYukle(ajaxUrl);
            });

            // --- ORTAK YÜKLEME FONKSİYONU ---
            function UrunleriYukle(url) {
                $("#urunKutusu").css("opacity", "0.3");
                $("#yukleniyor").fadeIn(100);

                $.get(url, function (data) {
                    $("#urunKutusu").html(data);
                    $("#urunKutusu").animate({ opacity: 1 }, 200);
                    $("#yukleniyor").hide();
                });
            }
        });
    </script>
}